#set($title="Blog")
#set($layout="layout/post.vm")

<div id="primary" class="content-area clr">
	<div class="site-content left-content clr" role="main">
		<article class="clr">
			<header class="page-header clr">
				<h1 class="page-header-title">发布文字</h1>
			</header>
			<!-- #page-header -->
			<div class="entry clr">
				<form class="form-horizontal" action="$base/blog/post" method="post" enctype="multipart/form-data">
					<input type="hidden" name="type" value="${type}"/>
					<div class="form-group">
						<label class="col-sm-2 control-label no-padding-right">标题</label>
						<div class="col-sm-8">
							<input type="text" class="form-control" name="title" data-required >
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label no-padding-right">内容</label>
						<div class="col-sm-8">
							<textarea id="content" name="content" rows="5" data-required data-describedby="message" data-description="content"></textarea>
						</div>
					</div>
    				<div class="form-group">
						<label class="col-sm-2 control-label no-padding-right">标签</label>
						<div class="col-sm-8">
							<input type="hidden" name="tags" id="fieldTags">
							<ul id="tags"></ul>
							<p class="help-block" style="font-size: 12px;">添加相关标签，用逗号或空格分隔.</p>
						</div>
    				</div>
					<div class="row">
						<div class="form-group">
                			<div class="text-center">
                				<button type="submit" class="btn btn-primary">提交</button>
                			</div>
                		</div>
					</div>
                </form>
				<!-- /form-actions -->
            </div>
        </article>
    </div>
</div>

<script type="text/javascript">
$(function() {
	if (App.browser.ios || App.browser.android) {
		$('#content').addClass('form-control');
	} else {
    	UE.getEditor('content',{
    		toolbars: [["bold","italic","underline","justifyleft","justifycenter","justifyright","link","unlink","fullscreen"]],
    		wordCount:false,
    		initialFrameWidth:'100%',
    		initialFrameHeight:220
    	});
	}
	$('#tags').tagit({
		singleField: true,
		singleFieldNode: $('#fieldTags')
	});
	
	$('form').validate({
		onKeyup : true,
		onChange : true,
		eachValidField : function() {
			$(this).closest('div').removeClass('has-error').addClass('has-success');
		},
		eachInvalidField : function() {
			$(this).closest('div').removeClass('has-success').addClass('has-error');
		},
		conditional : {
			content : function() {
				return $(this).val().length > 0;
			}
		},
		description : {
			content : {
				required : '<div class="alert alert-danger">写点内容吧</div>'
			}
		}
	});
});
</script>